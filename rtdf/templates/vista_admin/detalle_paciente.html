{% extends 'rtdf/base.html' %}

{% block content %}

{% load static %}

    <div>
        <a href="{% url 'list_paci_admin' %}">Volver a la lista de pacientes</a>
    </div>   
    </br>
    </br>

    <div class="container">
        <h1>Detalles del paciente {{ paciente.primer_nombre }} {{ paciente.ap_paterno }}</h1>
      </br>
    <div class="table-responsive">
      <table class="table">
          <thead class="thead-dark">
            <tr>
              <th scope="col">Rut</th>
              <th scope="col">Correo electronico</th>
              <th scope="col">Comuna</th>
              <th scope="col">Numero de contacto</th>
              <th scope="col">telegram</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">{{ paciente.numero_identificacion }}</th>
              <td>{{ paciente.email }}</td>
              <td>{{ paciente.id_comuna }}</td>
              <td>{{ paciente.numero_telefonico }}</td>
              <td>{{ paciente_info.telegram }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </br>
    </br>
    <h2><strong>Enfermedades del paciente</strong></h2>
    </br>

  <div class="table-responsive">
    <table class="table">
        <thead class="thead-dark">
          <tr>
            <th scope="col" class="col-6">Diabetes</th>
            <th scope="col" class="col-6">Hipertension</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td >{{ paciente_info.fk_tipo_diabetes }}</td>
            <td>{{ paciente_info.fk_tipo_hipertension }}</td>
          </tr>
        </tbody>
     </table>
  </div>    

  </br>
  <h2><strong>Profesional asignado al paciente</strong></h2>
  </br>

  <div class="table-responsive">
    <table class="table">
      <thead class="thead-dark">
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Nombre completo</th>
          <th scope="col">Email</th>
          <th scope="col">Tipo de profesional</th>
        </tr>
      </thead>
      <tbody>
        {% for profesional in fonoaudiologos_asociados %}
        <tr>
          <td >
            {{ profesional.id_usuario.id_usuario }}
            </a>
          </td>
          <td>
            {% if profesional.id_usuario.id_tp_usuario.tipo_usuario == 'Fonoaudiologo' %}
            <a href="{% url 'detalle_fonoaudiologo' fonoaudiologo_id=profesional.id_usuario.id_usuario %}">
                {{ profesional.id_usuario.primer_nombre }} 
                {{ profesional.id_usuario.segundo_nombre }}
                {{ profesional.id_usuario.ap_paterno }} 
                {{ profesional.id_usuario.ap_materno }}
            </a>
        {% elif profesional.id_usuario.id_tp_usuario.tipo_usuario == 'Neurologo' %}
            <a href="{% url 'detalle_neurologo' neurologo_id=profesional.id_usuario.id_usuario %}">
                {{ profesional.id_usuario.primer_nombre }} 
                {{ profesional.id_usuario.segundo_nombre }}
                {{ profesional.id_usuario.ap_paterno }} 
                {{ profesional.id_usuario.ap_materno }}
            </a>
        {% endif %}
          </td>
          <td>{{ profesional.id_usuario.email }} 
          </td>
          <td>{{ profesional.id_usuario.id_tp_usuario }} 
        </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  
  </br>
  <h2><strong>Informe GRBAS</strong></h2>
  </br>

  <div class="table-responsive">
    <table class="table">
        <thead class="thead-dark">
          <tr>
            <th scope="col">ID informe</th>
            <th scope="col">Fecha del informe</th>
            <th scope="col">Grado disfonia</th>
            <th scope="col">Rugosidad de voz</th>
            <th scope="col">B (Respiracion dificultosa)</th>
            <th scope="col">Astenia o grado de fatiga de voz</th>
            <th scope="col">S (Grado de tension vocal)</th>
          </tr>
        </thead>
        <tbody>
          {% for informe in informes_grbas %}
          <tr>
            <td><a href="{% url 'detalle_informe' informe.id_informe.id_informe %}">Informe {{ informe.id_informe.id_informe}}</a></td>
            <td>{{ informe.id_informe.fecha }}</td>
            <td class="valor-traducir">{{ informe.g_grado_disfonia }}</td>
            <td class="valor-traducir" >{{ informe.r_aspereza }}</td>
            <td class="valor-traducir" >{{ informe.b_soplo }}</td>
            <td class="valor-traducir">{{ informe.a_debilidad }}</td>
            <td class="valor-traducir">{{ informe.s_tension }}</td>
          </tr>
          {% empty %}
          <tr>
              <td colspan="8">Este paciente aún no cuenta con informes GRBAS adjuntos.</td>
          </tr>
          {% endfor %}   
        </tbody>
      </table>
    </div>

  </br>
  <h2><strong>Informe RASATI</strong></h2>
  </br>

  <div class="table-responsive">
    <table class="table">
        <thead class="thead-dark">
          <tr>
            <th scope="col">ID informe</th>
            <th scope="col">Fecha del informe</th>
            <th scope="col">Ronquera</th>
            <th scope="col">Aspereza</th>
            <th scope="col">Soplosidad</th>
            <th scope="col">Astenia</th>
            <th scope="col">Tension</th>
            <th scope="col">Inestabilidad</th>
          </tr>
        </thead>
        <tbody>
          {% for informe in informes_rasati %}
          <tr>
            <td><a href="{% url 'detalle_informe' informe.id_informe.id_informe %}">
              Informe {{ informe.id_informe.id_informe}}</a></td>
            <td>{{ informe.id_informe.fecha }}</td>
            <td class="valor-traducir">{{ informe.r_ronquedad }}</td>
            <td class="valor-traducir">{{ informe.a_aspereza }}</td>
            <td class="valor-traducir">{{ informe.s_soplo }}</td>
            <td class="valor-traducir">{{ informe.a_astenia }}</td>
            <td class="valor-traducir">{{ informe.t_tension }}</td>
            <td class="valor-traducir">{{ informe.i_inestabilidad }}</td>
          </tr>
          {% empty %}
          <tr>
              <td colspan="8">Este paciente aún no cuenta con informes RASATI adjuntos.</td>
          </tr>
          {% endfor %}   
        </tbody>
      </table>
    </div>

  </br>
  <h2><strong>Informes ESV</strong></h2>
  </br>

  <div class="table-responsive">
    <table class="table">
        <thead class="thead-dark">
          <tr>
            <th scope="col">ID informe</th>
            <th scope="col">Fecha del informe</th>
            <th scope="col">Total ESV</th>
            <th scope="col">Limitacion ESV</th>
            <th scope="col">Emocional ESV</th>
            <th scope="col">Fisico ESV</th>
          </tr>
        </thead>
        <tbody>
          {% for informe in informes_esv %}
          <tr>
            <td><a href="{% url 'detalle_esv_admin' informe.id_informe.id_informe %}">
              Informe {{ informe.id_informe.id_informe}}</td>
            <td>{{ informe.id_informe.fecha }}</td>
            <td>{{ informe.total_esv }}</td>
            <td>{{ informe.limitacion }}</td>
            <td>{{ informe.emocional }}</td>
            <td>{{ informe.fisico }}</td>
          </tr>
          {% empty %}
          <tr>
              <td colspan="8">Este paciente aún no cuenta con informes ESV adjuntos.</td>
          </tr>
          {% endfor %}   
        </tbody>
      </table>
    </div>

</div>


<script src="{% static 'app/js/traductor_numerico.js' %}"></script>


{% endblock %}







